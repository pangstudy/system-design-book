# 3장: 시스템 설계 면접 공략법

---

## 시스템 설계 면접이란?

* 일정 규모 이상 서비스(트래픽, 데이터, 복잡한 비즈니스)를 어떻게 설계·확장·운영할지를 묻는 면접입니다.
* 단순 “정답 문제”가 아니라, 지원자의 사고 과정·커뮤니케이션·트레이드오프 판단 능력을 보는 성격이 강합니다.
* 보통 다음을 검증합니다.

  * 요구사항 정의 능력 (질문 얼마나 잘 던지는지)
  * 아키텍처 설계 능력 (큰 그림, 컴포넌트 분리)
  * 성능·확장성·신뢰성에 대한 이해
  * 현실적인 제약(시간, 비용, 기술 스택) 안에서의 선택 능력

질문 예시: “뉴스 피드 시스템 설계”, “URL 단축기 설계”, “동영상 스트리밍 서비스 설계” 등.

---

## 면접관의 신호: 부정 / 긍정

### 부정적인 신호

* 요구사항 질문 없이 바로 그림부터 그린다.
* 한 가지 방식만 고집하고, 다른 대안을 전혀 언급하지 않는다.
* 트래픽, 저장 용량, QPS, 지연 시간 같은 숫자 이야기를 전혀 하지 않는다.
* 면접관 질문에 설계 방향을 유연하게 바꾸지 못하고, 계속 같은 이야기만 반복한다.

### 긍정적인 신호

* 먼저 “이 문제를 이렇게 이해해도 될까요?” 하고 요구사항을 정리한다.
* 화이트보드(또는 말)로 클라이언트 → API → 웹 서버 → 캐시 → DB → 메시지 큐 같은 큰 흐름을 단계적으로 설명한다.
* “여기 병목일 것 같습니다”, “여기서는 이런 트레이드오프가 있습니다” 같이 스스로 이슈를 짚어준다.
* 면접관의 힌트나 질문을 잘 받아서 설계를 단계적으로 개선한다.

---

## 효과적인 4단계 접근법

### 1단계: 문제 이해 및 설계 범위 확정

#### 핵심 포인트

* 바로 답부터 들이밀지 말고, “질문 → 정리 → 합의” 흐름을 먼저 만듭니다.
* 좋은 시스템 설계 면접의 절반은 “올바른 질문”에서 나옵니다.

#### 꼭 물어봐야 할 질문들

* 기능 범위

  * 구체적으로 어떤 기능이 필요한가요?

    * 예: 뉴스 피드라면

      * 친구들의 글 보기
      * 내가 글 작성/삭제
      * 좋아요, 댓글, 공유 기능 포함 여부
* 사용자 규모

  * 하루/월간 활성 사용자 수(DAU/MAU)?
  * 피드 조회 QPS, 피드 작성 QPS 대략 어느 정도로 가정할지?
* 회사/서비스 성장 속도

  * 지금은 몇 명 수준, 1년 뒤에 몇 배 정도 성장을 기대하는지?
  * 초기에 단일 리전인지, 글로벌 서비스인지?
* 기술 스택

  * 주로 사용하는 언어/프레임워크/DB 타입 (RDB vs NoSQL)?
  * 클라우드 사용 여부 (AWS/GCP/Azure), 또는 온프레미스?

#### 예제: 뉴스 피드 시스템 설계 시 질문 예시

* 웹과 앱 중 무엇이 메인인가요? 둘 다 지원해야 하나요?
* 피드는 최신 순(역순) 정렬인가요, 추천/랭킹 알고리즘이 포함되나요?
* 한 사용자는 최대 몇 명 정도의 친구/팔로우를 가질 수 있나요?
* 피드에 이미지/동영상 같은 미디어 파일이 포함되나요? (스토리지, CDN 이슈)
* 피드 새로고침 주기와 허용 지연 시간(예: 피드가 1~2초 늦게 보여도 되는가?)은 어느 정도인가요?

질문 예시: “문제를 받았을 때, 최소 몇 개 정도의 질문을 던지는 게 적당하다고 생각하시나요?”

---

### 2단계: 개략적인 설계안 제시 및 동의 구하기

#### 핵심 포인트

* 먼저 “청사진”을 보여주고, 면접관과 큰 방향을 맞춥니다.
* 이 단계에서는 디테일보다는 “어떤 컴포넌트가 있고, 서로 어떻게 연결되는지”가 중요합니다.

#### 기본 다이어그램 구성

화이트보드를 그린다고 생각하고, 대략 이런 블록들을 언급합니다.

* 클라이언트 (웹, 모바일 앱)
* API 게이트웨이 / 웹 서버
* 인증/권한 서버(필요 시)
* 뉴스피드 API 서버
* 데이터베이스 (유저, 친구 관계, 글/피드 저장)
* 캐시 (Hot 피드, 사용자 타임라인 캐시)
* 메시지 큐 (피드 fan-out, 알림 비동기 처리)
* 파일 저장소 / CDN (이미지, 동영상)

그리고 면접관에게 한 번 묻습니다.

* “이 정도 구성이면 괜찮을까요?”
* “혹시 더 중점적으로 보고 싶은 부분이 있으신가요? (예: 뉴스 피드 생성 로직, 캐시 전략 등)”

#### 대략적인 계산과 엣지 케이스

* 트래픽/저장 용량을 대략적으로 계산합니다.

  * 예: DAU 1,000만명, 하루 피드 작성 1억 건, 평균 글 크기 1KB → 하루 100GB
* 엣지 케이스를 간단히 언급합니다.

  * 특정 연예인/인플루언서 글에 트래픽 몰리는 경우
  * 특정 지역 장애 시 트래픽 우회
  * 친구가 매우 많은 사용자(팔로워 수가 큰 계정) 처리 등

#### 뉴스 피드 예시 – 2개 플로우

* 피드 발행(Write Path)

  * 사용자가 글 작성 → API 서버 → DB 저장 → 메시지 큐 → 친구들의 타임라인에 fan-out
* 피드 조회(Read Path)

  * 사용자가 홈 피드 열기 → 타임라인 캐시 조회 → 없으면 DB에서 읽어와 캐시 채움

질문 예시: “개략 설계 단계에서 숫자(QPS, 저장 용량)를 왜 대략이라도 계산해보는 게 중요할까요?”

---

### 3단계: 상세 설계

#### 핵심 포인트

* 이 단계부터 “어디를 깊게 파고 들어갈지” 우선순위를 정합니다.

  * 예: 뉴스 피드라면 보통 피드 fan-out 전략, 캐시 전략, DB 설계를 깊게 들어감.
* 모든 컴포넌트를 다 깊게 설명하려 하지 말고, 1~2개를 골라 깊게 설명하는 게 좋습니다.

#### 설계 우선순위와 성능 특성

* 어떤 부분이 병목이 될지 먼저 짚습니다.

  * 피드 발행 QPS vs 피드 조회 QPS
  * 친구 수가 많은 유저에게서 발생하는 폭발적 fan-out
  * DB 읽기/쓰기 부담, 캐시 적중률
* 지연 시간 목표를 정합니다.

  * 피드 조회는 P95 200~300ms 정도 목표
  * 피드 발행은 약간 느려도 되지만(수백 ms), 일관성이 중요한지 여부 등

#### 뉴스 피드 예시 – 구체적인 설계

* 피드 발행

  * Write 시 전략 (fan-out on write vs fan-out on read) 선택

    * fan-out on write: 글 작성 시 친구들의 타임라인에 미리 써두기
    * fan-out on read: 읽을 때마다 친구 목록 기반으로 피드 조합
  * 장단점 비교하면서 “이 문제에서는 어떤 걸 택하겠다” 선택 이유 설명
* 피드 조회

  * 캐시 계층 구조

    * 사용자 타임라인을 Redis Sorted Set 등에 저장
    * 최근 N개는 캐시에, 나머지는 DB에서 paging
  * DB 스키마 개략 설명

    * Posts 테이블, User-Friend 관계 테이블, UserFeed(타임라인) 테이블 등

질문 예시:

* “뉴스 피드에서 fan-out on write와 fan-out on read 중 하나를 선택해보시고, 그 이유를 말해보세요.”
* “어떤 지점이 병목이 될 것 같고, 어떻게 완화할 수 있을까요?”

---

### 4단계: 마무리

#### 해야 할 마무리 정리

* 설계 요약

  * “전체적으로는 이런 흐름입니다”라고 다시 한 번 한 줄로 정리
  * 예: “클라이언트 → API → 캐시 → DB, 피드 발행은 큐를 통해 비동기 fan-out, 캐시로 읽기 병목 완화”
* 병목 지점 언급

  * DB 쓰기/읽기, 캐시 용량, 큐 적체, 특정 인기 유저 피드 처리 등
* 개선 가능 지점

  * 읽기/쓰기 분리, 샤딩, 더 aggressive한 캐시 전략, 백그라운드 배치 처리, 모니터링·알람 붙이기 등
* 오류/에러 처리

  * 피드 발행 실패 시 재시도 전략 (큐 재시도, DLQ)
  * 캐시 장애 시 DB fallback 전략
  * 일부 컴포넌트 장애 시 서비스는 어떻게 degrade 시킬지 (부분 기능만 제한)

질문 예시: “지금 설계한 시스템에 모니터링을 붙인다면, 어떤 지표들을 꼭 보고 싶으신가요?”

---

## 해야 할 것 / 하지 말아야 할 것

### 해야 할 것

* 질문을 통해 요구사항을 먼저 명확히 한다.
* 면접관과 문제 정의, 범위를 먼저 합의한다.
* “정답”보다는 “합리적인 여러 해법 + 트레이드오프”를 설명한다.
* 개략 설계에서 동의를 받은 뒤, 그 중 일부를 선택해 깊게 파고든다.
* 말하면서 생각을 드러낸다.

  * “여기서는 이런 선택도 있지만, 이 문제 스케일에서는 이쪽이 더 나을 것 같습니다” 같은 식으로.

### 하지 말아야 할 것

* 아무 준비 없이 면접장에 가지 않는다.

  * 최소한 자주 나오는 문제(뉴스 피드, URL 단축기, 채팅 시스템, 동영상 스트리밍 등)는 한 번씩 설계해보는 게 좋습니다.
* 요구사항이나 전제 없이 바로 아키텍처를 그리기 시작하지 않는다.
* 처음부터 DB 테이블 구조, 인덱스, 세부 API 스펙만 파고들지 않는다.
* 막히면 조용히 멈춰 있는다기보다, 힌트를 요청하거나 생각을 소리 내서 풀어간다.
* 설계안을 제시하고 “끝입니다” 하고 가만히 있지 말고, 스스로 리스크와 개선 포인트를 한 번 짚어본다.

---

## 마무리 질문 예시 모음

면접 대비용으로 3장 내용을 기반으로 연습해볼 만한 질문들입니다.

1. 시스템 설계 면접에서 “먼저 질문부터 하는 것”이 중요한 이유는 무엇인가요?
2. 뉴스 피드 설계 문제에서, 면접관에게 반드시 물어봐야 할 요구사항 질문 3가지를 말해보세요.
3. 개략 설계 단계에서 꼭 포함해야 할 컴포넌트는 무엇이고, 왜 그 순서로 설명하는 것이 좋을까요?
4. 뉴스 피드에서 fan-out on write / fan-out on read 각각의 장단점을 한 줄씩 정리해보세요.
5. 설계 마무리 단계에서 “병목 지점”과 “개선 가능 지점”을 언급하는 것이 왜 좋은 인상을 줄까요?
